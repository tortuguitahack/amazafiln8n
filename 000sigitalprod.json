{
  "name": "Digital-Product-Expert-Bundle-Courses",
  "nodes": [
    {
      "parameters": {
        "model": "gpt-3.5-turbo",
        "openaiApiKey": "TU_APIKEY_OPENAI",
        "messages": [
          {
            "role": "system",
            "content": "Genera el contenido del producto digital solicitado, crea ebooks, cursos o bundles, aÃ±ade copy profesional y portada."
          }
        ]
      },
      "name": "Generar Producto AI",
      "type": "n8n-nodes-base.openai",
      "typeVersion": 1,
      "position": [250, 200]
    },
    {
      "parameters": {
        "credentials": "TUS_CREDENCIALES_GOOGLEDRIVE",
        "operation": "upload",
        "binaryPropertyName": "productFile",
        "parentFolderId": "TU_FOLDER_ID",
        "setName": "Nombre_del_producto",
        "setMimeType": "application/pdf"
      },
      "name": "Subir Archivo a Drive",
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 1,
      "position": [400, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "https://api.gumroad.com/v2/products",
        "bodyParametersUi": {
          "parameter": [
            { "name": "access_token", "value": "TU_GUMROAD_ACCESS_TOKEN" },
            { "name": "name", "value": "={{$json[\"product_name\"]}}" },
            { "name": "price", "value": "={{$json[\"product_price\"]}}" },
            { "name": "url", "value": "={{$node[\"Subir Archivo a Drive\"].json[\"webContentLink\"]}}" }
          ]
        }
      },
      "name": "Crear Producto Gumroad",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [600, 200]
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "url": "https://api.stripe.com/v1/payment_links",
        "headerParametersUi": { "parameter": [ { "name":"Authorization", "value": "Bearer TU_STRIPE_API_KEY"} ] },
        "bodyParametersUi": {
          "parameter": [
            { "name":"line_items[0][price_data][currency]", "value":"usd" },
            { "name":"line_items[0][price_data][product_data][name]", "value":"={{$json[\"product_name\"]}}" },
            { "name":"line_items[0][price_data][unit_amount]", "value":"={{$json[\"product_price\"]*100}}" },
            { "name":"line_items[0][quantity]", "value":"1" }
          ]
        }
      },
      "name": "Crear Link de Pago Stripe",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [750, 200]
    },
    {
      "parameters": {
        "credentials": "TUS_CREDENCIALES_TWITTER",
        "resource": "tweet",
        "text": "Â¡Nuevo producto {{$json[\"product_name\"]}} disponible por tiempo limitado! Accede aquÃ­: {{$node[\"Crear Producto Gumroad\"].json[\"product_permalink\"]}}"
      },
      "name": "Publicar en Twitter",
      "type": "n8n-nodes-base.twitter",
      "typeVersion": 1,
      "position": [900,150]
    },
    {
      "parameters": {
        "credentials": "TUS_CREDENCIALES_TELEGRAM",
        "text": "ðŸš€ Â¡Nuevo producto digital listo! Mira y compra rÃ¡pido: {{$node[\"Crear Link de Pago Stripe\"].json[\"url\"]}}",
        "chatId": "TU_CHAT_ID"
      },
      "name": "Notificar Telegram",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [900,250]
    },
    {
      "parameters": {
        "credentials": "TUS_CREDENCIALES_WORDPRESS",
        "operation": "create",
        "resource": "post",
        "title": "={{$json[\"product_name\"]}} disponible",
        "content": "={{\"Descubre nuestro nuevo producto digital y compra aquÃ­: \" + $node[\"Crear Producto Gumroad\"].json[\"product_permalink\"]}}"
      },
      "name": "Publicar en Wordpress",
      "type": "n8n-nodes-base.wordpress",
      "typeVersion": 1,
      "position": [900,350]
    },
    {
      "parameters": {
        "path": "webhook-venta-producto",
        "httpMethod": "POST",
        "responseMode": "lastNode"
      },
      "name": "Webhook de Venta",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [1200, 200]
    },
    {
      "parameters": {
        "fromEmail": "TUMAIL@TUEMPRESA.COM",
        "toEmail": "={{$json[\"buyer_email\"]}}",
        "subject": "Â¡Gracias por tu compra!",
        "text": "Hola {{$json[\"buyer_name\"]}}, adjunto tu producto digital {{$json[\"product_name\"]}}. DisfrÃºtalo."
      },
      "name": "Enviar Email de Producto",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 1,
      "position": [1400, 200]
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "spreadsheetId": "TU_GOOGLE_SHEET_ID",
        "sheetName": "Ventas",
        "operation": "append",
        "columns": [
          "fecha", "producto", "comprador", "canal", "email"
        ],
        "values": [
          "={{$now}}",
          "={{$json[\"product_name\"]}}",
          "={{$json[\"buyer_name\"]}}",
          "={{$json[\"canal\"]}}",
          "={{$json[\"buyer_email\"]}}"
        ]
      },
      "name": "Dashboard Ventas",
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 1,
      "position": [1550, 200]
    }
  ],
  "connections": {
    "Generar Producto AI": { "main": [ ["Subir Archivo a Drive"] ] },
    "Subir Archivo a Drive": { "main": [ ["Crear Producto Gumroad", "Crear Link de Pago Stripe"] ] },
    "Crear Producto Gumroad": { "main": [ ["Publicar en Twitter", "Notificar Telegram", "Publicar en Wordpress"] ] },
    "Crear Link de Pago Stripe": { "main": [ ["Notificar Telegram"] ] },
    "Webhook de Venta": { "main": [ ["Enviar Email de Producto", "Dashboard Ventas"] ] }
  }
}
